## 2022/8/26

### getline()和get()
由于`cin`在对于有空格的输入不完整，引出下列函数

`getline()`读取整行，它使用通过回车键输入的换行符来确定输入结尾，调用时可以这样用`cin.getline()`。`getline()`成员函数在读取指定数目的字符或遇到换行符时停止读取。它虽然通过换行符来确定对尾，但并不保存换行符，并且在存储字符串时用空字符来替换换行符
```
cin.getline(name,20);   //将姓名输入包含20个元素的name数组
//函数最多输入19个，未满的则在后面加上空字符
```
`get()`与`getline()`类似，主要区别就是`get()`不会停止并丢弃换行符,而是将其留在输入队列中因此在使用时应用`cin.get()`来读取换行符。
```
cin.get(name,ArSize);
cin.get();
//也可以将其拼接起来
cin.get(name,ArSize).get();
```

### string类
```
string str1;    //声明创建一个长度为0的string变量
cin >> str1;    //在输入到str1时，程序将自动调整其长度

//可以轻易的实现数组无法完成的赋值与拼接（数组需要使用strcpy和strcat）
string str2 = "bear";
str1 = str2;    //赋值
str1+= str2;    //拼接（也可以str1=str1+str2;）

char charr1[20] = "house"
int len1 = str2.size();     //获取str2中的字符数，这里是4
int len2 = strlen(charr1)   //获取数组中的字符数，这里是5
```
### 给指针分配动态内存
在c中变量的内存都在***编译时***进行分配
在c++中指针可以在***运行中***申请内存
```
int * pi = new int;  
int * pa = new int [10];     //申请int类型，长度为10的内存空间,也可以说创建了一个int型的动态数组

//注意：用new申请的内存，在使用完后（生命周期结束时），应用delete进行内存释放

delete pi;
delete [] pa;

//注意：不能delete同一个内存两次，且保证怎么申请，怎么释放
```
### 指针运算
指针变量的运算与整型的不同，整型的加一会在其值上直接加一，而指针变量加一后，增加的量等于它指向的类型的字节数。例：将指向double的指针变量加一后，如果系统对double使用8个字节存储，则指针变量的数值将增加8.

### 自动存储、静态存储和动态存储
函数内部定义的常规变量使用自动存储空间，被称为自动变量。自动变量是一个局部变量，其作用域为包含他的一个代码块。

静态存储是整个程序执行期间都存在的存储方式，有两种方式定义静态变量：
1. 在函数外定义变量；
2. 在声明变量时使用关键字`static`

动态存储用`new`和`delete`实现了一种更灵活的方式，它管理一个内存池，允许用户通过`new`和`delete`来进行分配和释放。因此数据的生命周期就不完全受程序或函数的生存时间控制，对程序员使用内存有更大的控制权。
* * * 

## 2022/8/27

### 前缀与后缀
在于指针一起使用时，需要注意优先级的问题。
其中：前缀与取消引用（即`*`）优先级一致，而后缀优先级高于前缀。

示例：
```
double arr[5] = {1,11,21,31,41};
double *pt = arr;
++pt;                               //按照指针加法，加上对应类型的字节数，结果为数组第二个值的地址&arr[1]

double x = *++pt;                   //先进行++pt,然后再取消引用将值赋给x,值为21

++*pt;                              //先取消引用再进行++pt，值为22

(*pt)++;                            //通过圆括号表明执行顺序，先取消引用，再进行++，值为23

x = *pt++;                          //按照优先级，先将++运用于pt，再取消引用，所以x=23,赋值完后pt加一，值为arr[3]的地址
```
### 逗号运算
在某些情况可以使用逗号运算符将两个表达式合并为一个，例：
```
for(int i,j;i<j;i++,j--)

//在int i,j中逗号仅表示将两个变量名分隔开，而i++，j++则是将两个表达式合并为一个
```

逗号运算符还具有一些其他特性：

1. 确保先计算第一个表达式，再计算第二个表达式，即逗号运算符可以看作一个顺序点。所以以下表达式是安全的
   `i = 20,j = i*2;`
2. 逗号表达式的值为第二部分的值，例如，上述表达式的值就是40。
3. 逗号运算符优先级是最低的。
```
cats = 17,240;      //因为优先级最低，这里值为17

cats = (17,240);    //这里因为逗号表达式的值为后一个的值，所以这里是240
```

* * *

## 2022/8/28

### 新增的循环

针对`for`c++新增了一种用法，如下示例：
```
double prices[5] = {4.9, 5.2, 6.3, 7.4, 8.5};

for(double x : prices)      //其中x最初为数组prices第一个元素，之后依次表示之后的元素
    cout << x << endl;

for(double &x : prices)     //符号&表示x是一个引用变量，这种声明让接下来的代码可以修改数组中的值，而第一种不可以
    x = x * 0.4;
    
for(int x : {1,2,3,4,5})    //还可以使用范围来初始化循环列表
    cout << x << endl;
```

### 文本输入

c++中的`cin`在输入完字符按下回车后，会缓冲进程序。所以在没有足够的空间存储时，值仍然会存在于输入流中，在下一次存储时继续。

在之前讨论`cin.get()`时还忽略了一点，在以下代码中
```
char ch;
cin.get(ch);    //将值传入ch变量
```
`cin.get(ch)`这个用法是正确的，而回想到c中，在c中我们要改变一个变量的值时需要将变量的地址传入函数。这里有效是因为在`c++`中该函数申明为++引用++了,引用是`c++`新增的一种类型。

### oop特性之函数重载
在之前的讨论和以上代码可以发现对于`cin.get()`有不同版本的用法
```
char name[ArSize];

cin.get(name,ArSize).grt();

cin.get(name,ArSize);
cin.get();              
//在这里它接受两个参数分别是数组名（字符串地址（char*类型））和数组长度（int型）

char ch;
cin.get(ch);
//这里它只接受了一个char型的参数

```
在我们熟悉的c语言中这样的用法是不被允许的，一个函数传入的参数类型与数量是按照函数原型定义好的，只能有一种，而`c++`中由于***函数重载***的特性这样做是被允许的。
***函数重载***允许创建多个同名函数，条件是它们的参数列表不同。函数在被调用时根据不同的参数列表，来选择不同的函数版本。

### 文件结尾条件与输入
在windows命令行环境中`<ctrl>+<z>+<enter>`可以被模拟为***文件尾（EOF）***。用cin.eof()与cin.fail()进行测试。
由它引出了关于cin的一些性质：
在需要的时候cin的返回值为`bool`类型，根据最后一次的读取，成功返回`ture`，失败则为`false`;
`cin.get(ch)`与`cin.get()`的区别；

| 属性 | cin.get(ch) | ch = cin.get() |
| --- | --- | --- |
| 传递输入字符的方式 | 赋给参数ch | 将函数返回值赋给ch |
| 用于字符输入时函数的返回值 | istream对象（执行bool转换后为ture） | int类型的字符编码 |
| 到达EOF时函数的返回值 | istream对象（执行bool转换后为false） | EOF |

* * *

## 2022/8/30

### 一些常见的输出设置
```
cout << fixed;      //使用一般方式输出浮点数，而不是科学记数法
cout.precision(2);  //设置精度为小数点后两位
cout.setf（iOS_base::showpoint） ;//显示浮点数小数点后面的零
```


